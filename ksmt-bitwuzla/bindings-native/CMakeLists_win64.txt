cmake_minimum_required (VERSION 3.8)

SET(CMAKE_SYSTEM_NAME "Windows")
SET(CMAKE_C_COMPILER  "gcc")
SET(CMAKE_CXX_COMPILER "g++")
SET(CMAKE_MAKE_PROGRAM "mingw32-make")

PROJECT(bitwuzla_jni)


FIND_PACKAGE(JNI REQUIRED)

SET(CXX_STANDARD 17)
#SET(PROJECT_SOURCE_DIR "/path/to/bitwuzla/root")

# Path to bitwuzla.h, enums.h, option.h
SET(BITWUZLA_INCLUDE "${PROJECT_SOURCE_DIR}/include")

# Path to bitwuzla library (libbitwuzla.so)
SET(BITWUZLA_LIB "${PROJECT_SOURCE_DIR}/build/src/${CMAKE_SHARED_LIBRARY_PREFIX}bitwuzla${CMAKE_SHARED_LIBRARY_SUFFIX}")

ADD_LIBRARY (bitwuzla_jni SHARED bitwuzla_jni.cpp bitwuzla_extension.cpp)

TARGET_INCLUDE_DIRECTORIES(bitwuzla_jni PRIVATE ${JNI_INCLUDE_DIRS})
TARGET_INCLUDE_DIRECTORIES(bitwuzla_jni PRIVATE "./include"})
TARGET_INCLUDE_DIRECTORIES(bitwuzla_jni PRIVATE ${BITWUZLA_INCLUDE})

SET(CMAKE_INTERPROCEDURAL_OPTIMIZATION TRUE)

TARGET_LINK_LIBRARIES(bitwuzla_jni PRIVATE ${BITWUZLA_LIB})
